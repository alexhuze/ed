<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mark Racer</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        canvas {
            display: block;

        }

    </style>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.js"></script>
</head>
<body>

<script>
    const GAME_WIDTH = 1800;
    const GAME_HEIGHT = 1000;

    const ROAD_TOP = 400;

    class MenuScene extends Phaser.Scene {
        constructor() {
            super("MenuScene");
        }

        preload() {

            this.load.image("sky", "./images/sky3.jpeg");
            this.load.image("road", "./images/road1.jpeg");
            this.load.image("cloud", "./images/claud.png");
            this.load.spritesheet("carAnim", "./images/car-sprite.png", {
            frameWidth: 220,
            frameHeight: 220
        });
        }

        create() {

            let bg = this.add.image(GAME_WIDTH/2, GAME_HEIGHT/2, "sky");
            bg.setDisplaySize(GAME_WIDTH, GAME_HEIGHT);


            this.add.text(GAME_WIDTH/2, 300, "MARK RACER", {
                fontSize: "80px",
                color: "#ff0000",
                fontStyle: "bold"
            }).setOrigin(0.5);


            let startBtn = this.add.text(GAME_WIDTH/2, 600, "START", {
                fontSize: "70px",
                color: "#ff0000"
            }).setOrigin(0.5).setInteractive();


            startBtn.on("pointerdown", () => {
                this.scene.start("GameScene");
            });
        }
    }


    class GameScene extends Phaser.Scene {
        constructor() {
            super("GameScene");
        }

        create() {

           //this.cloud.setScale(0.5);
            this.sky = this.add.image(GAME_WIDTH/2, 300, "sky");
            this.sky.setDisplaySize(GAME_WIDTH, 600);
        this.cloud = this.add.image(100, 100, "cloud");
        this.cloud2 = this.add.image(100, 250, "cloud");
            this.road = this.add.tileSprite(GAME_WIDTH/2, 800, GAME_WIDTH, 600, "road");
            this.anims.create({
              key: "carMove",
              frames: this.anims.generateFrameNumbers("carAnim", { start: 0, end: 3 }),
              frameRate: 10,
              repeat: -1
            });

            this.car = this.physics.add.sprite(75, 800, "carAnim");
            this.car.play("carMove");
            //this.car.setDisplaySize(220, 220);
            //this.car.setScale(0.2);

            this.car.setCollideWorldBounds(true);


            this.car.body.setBoundsRectangle(
                new Phaser.Geom.Rectangle(0, ROAD_TOP, GAME_WIDTH, GAME_HEIGHT - ROAD_TOP)
            );

            this.cursors = this.input.keyboard.createCursorKeys();
        }

        update() {
        this.cloud.x += 1; //


        if (this.cloud.x > GAME_WIDTH + 100) {
            this.cloud.x = 0;
        }
        this.cloud2.x += 2; //


        if (this.cloud2.x > GAME_WIDTH + 150) {
            this.cloud2.x = 0;
        }
            this.road.tilePositionX += 1;


            this.car.setVelocity(0);

            if (this.cursors.up.isDown) {
                this.car.setVelocityY(-200);
            } else if (this.cursors.down.isDown) {
                this.car.setVelocityY(200);
            } else if (this.cursors.left.isDown) {
          this.car.setVelocityX(-200);
            } else if (this.cursors.right.isDown) {
          this.car.setVelocityX(200);
            }
        }
    }


    const config = {
        type: Phaser.AUTO,
        width: GAME_WIDTH,
        height: GAME_HEIGHT,
        physics: {
            default: 'arcade'
        },
        scene: [MenuScene, GameScene]
    };

    new Phaser.Game(config);

</script>

</body>
</html>